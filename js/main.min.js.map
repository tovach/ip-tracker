{"version":3,"file":"main.min.js","mappings":"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","sources":["webpack://dahinbondad/./app/js/helpers/constants.js","webpack://dahinbondad/./app/js/main.js","webpack://dahinbondad/./app/js/utils/fetchData.js","webpack://dahinbondad/webpack/bootstrap","webpack://dahinbondad/webpack/runtime/chunk loaded","webpack://dahinbondad/webpack/runtime/define property getters","webpack://dahinbondad/webpack/runtime/hasOwnProperty shorthand","webpack://dahinbondad/webpack/runtime/make namespace object","webpack://dahinbondad/webpack/runtime/jsonp chunk loading","webpack://dahinbondad/webpack/before-startup","webpack://dahinbondad/webpack/startup","webpack://dahinbondad/webpack/after-startup"],"sourcesContent":["const ipifyAPIKey = \"at_0JpU6WWevJRd2005q7zFfS3Z4lenv\";\r\n\r\nexport { ipifyAPIKey };\r\n","import L from \"leaflet\";\r\n\r\nimport { ipifyAPIKey } from \"./helpers/constants\";\r\nimport { fetchData } from \"./utils/fetchData\";\r\n\r\nlet mapContainer;\r\n\r\nconst dom = {\r\n  form: document.querySelector(\".form\"),\r\n  info: {\r\n    ip: document.querySelector(\"#ip\"),\r\n    location: document.querySelector(\"#location\"),\r\n    timezone: document.querySelector(\"#timezone\"),\r\n    isp: document.querySelector(\"#isp\"),\r\n  },\r\n  map: document.querySelector(\"#map\"),\r\n};\r\n\r\nconst setInfo = ({ ip, country, city, timezone, isp }) => {\r\n  dom.info.ip.innerText = ip;\r\n  dom.info.location.innerText = `${country}, ${city}`;\r\n  dom.info.timezone.innerText = `UTC ${timezone}`;\r\n  dom.info.isp.innerText = isp;\r\n};\r\n\r\nconst setMap = (lat, lng, mapContainer = \"\") => {\r\n  if (mapContainer) {\r\n    mapContainer.off();\r\n    mapContainer.remove();\r\n  }\r\n\r\n  const markerIcon = L.icon({\r\n    iconUrl: \"images/compressed/map/marker-icon.png\",\r\n  });\r\n\r\n  const map = L.map(dom.map).setView([lat, lng], 16);\r\n  L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n    maxZoom: 19,\r\n    attribution: \"Â© OpenStreetMap\",\r\n  }).addTo(map);\r\n  L.marker([lat, lng], { icon: markerIcon }).addTo(map);\r\n\r\n  return map;\r\n};\r\n\r\nconst getInfo = async (ip) => {\r\n  const getInfoUrl = `https://geo.ipify.org/api/v2/country,city?apiKey=${ipifyAPIKey}&ipAddress=${ip}`;\r\n  const {\r\n    location: { country, city, lat, lng, timezone },\r\n    isp,\r\n  } = await fetchData(getInfoUrl);\r\n  return { ip, country, city, timezone, isp, lat, lng };\r\n};\r\n\r\nconst formHandler = (e) => {\r\n  e.preventDefault();\r\n  const regExp =\r\n    /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\r\n  const formData = new FormData(e.target);\r\n  const { formIp } = Object.fromEntries(formData);\r\n\r\n  if (regExp.test(formIp)) {\r\n    getInfo(formIp).then(({ ip, country, city, timezone, isp, lat, lng }) => {\r\n      setInfo({ ip, country, city, timezone, isp });\r\n      mapContainer = setMap(lat, lng, mapContainer);\r\n    });\r\n  } else {\r\n    alert(\"Only correct ip adresses allowed :)\");\r\n    return;\r\n  }\r\n};\r\n\r\nconst main = async () => {\r\n  const getIpUrl = \"https://api.ipify.org?format=json\";\r\n  const { ip: userIp } = await fetchData(getIpUrl);\r\n  const { ip, country, city, timezone, isp, lat, lng } = await getInfo(userIp);\r\n  setInfo({ ip, country, city, timezone, isp });\r\n  mapContainer = setMap(lat, lng);\r\n};\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", main);\r\ndom.form.addEventListener(\"submit\", formHandler);\r\n","const fetchData = async (url) => {\r\n  const headers = new Headers({\r\n    \"Accept\": \"application/json\",\r\n    \"Content-Type\": \"application/json\",\r\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36\",\r\n  });\r\n  try {\r\n    const response = await fetch(url, { headers });\r\n    if (response.ok) {\r\n      return await response.json();\r\n    } else {\r\n      throw new Error(\"Fetch error! Turn off adblockers :)\");\r\n    }\r\n  } catch (error) {\r\n    alert(error);\r\n  }\r\n};\r\n\r\nexport { fetchData };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdahinbondad\"] = self[\"webpackChunkdahinbondad\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendor\"], function() { return __webpack_require__(\"./app/js/main.js\"); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["ipifyAPIKey","L","fetchData","mapContainer","dom","form","document","querySelector","info","ip","location","timezone","isp","map","setInfo","country","city","innerText","setMap","lat","lng","off","remove","markerIcon","icon","iconUrl","setView","tileLayer","maxZoom","attribution","addTo","marker","getInfo","getInfoUrl","formHandler","e","preventDefault","regExp","formData","FormData","target","formIp","Object","fromEntries","test","then","alert","main","getIpUrl","userIp","window","addEventListener","url","headers","Headers","response","fetch","ok","json","Error","error"],"sourceRoot":""}